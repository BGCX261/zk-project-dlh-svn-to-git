function DPA(e,c){var a=new Array();var d,b;for(d=0;d<e.length+1;d++){a[d]=new Array()}a[0][0]=0;for(b=1;b<=c.length;b++){a[0][b]=a[0][b-1]-0+1}for(d=1;d<=e.length;d++){a[d][0]=a[d-1][0]-0+1;for(b=1;b<=c.length;b++){var f=a[d-1][b-1];if(e.charAt(d-1)!=c.charAt(b-1)){f++}a[d][b]=Math.min(f,Math.min(a[d-1][b]-0+1,a[d][b-1]-0+1))}}return a[e.length][c.length]}EMAIL_LIST=["163.com","126.com","139.com","188.com","2008.china.com","2008.sina.com","21cn.com","263.net","china.com","chinaren.com","citiz.net","eyou.com","foxmail.com","gmail.com","hongkong.com","hotmail.com","live.cn","live.com","mail.china.com","msn.com","my3ia.sina.com","qq.com","sina.cn","sina.com","sina.com.cn","sogou.com","sohu.com","tom.com","vip.163.com","vip.qq.com","vip.sina.com","vip.sohu.com","vip.tom.com","yahoo.cn","yahoo.com","yahoo.com.cn","yahoo.com.hk","yahoo.com.tw","yeah.net"];function mail_like(c){var b=c.split("@"),g=b[1]||"",a=g.length,f;for(k=0;k<EMAIL_LIST.length;k++){var h=EMAIL_LIST[k],i=DPA(g,h);if(i<a){a=i;f=h}}if(a&&a<4){return f}}var FIXED_EMAIL;function fixmail_set(){var d=$("#mail"),a=d.val(),b=$("#fixmail"),f=mail_like(a);if(f){d.val(a.split("@")[0]+"@"+f)}b.fadeOut()}function fixmail_hide(a){$(a.parentNode).fadeOut();FIXED_EMAIL=$("#mail").val()}function check_mail(f){var e=$("#err_mail"),c=$("#mail");var b=$.trim(c.val());c.val(b);if(f&&b!=FIXED_EMAIL){var a=mail_like(b),d=b.split("@")[0];if(a){e.html('<b class="fixmail_name" style="font-weight:normal;color:#666"></b><b class="fixmail_domain"></b>　<a onclick="fixmail_set();fixmail_hide(this)" href="javascript:void(0)">是</a> <b style="font-weight:normal;color:#666">/</b> <a onclick="fixmail_hide(this);nofix();" href="javascript:void(0)">否</a>');e.find(".fixmail_name").text("你是否要输入 "+d+"@");e.find(".fixmail_domain").text(a);e.show().css("display","block").find("a:first").focus();return}}if(!/^[_\.0-9a-zA-Z+-]+@([0-9a-zA-Z]+[0-9a-zA-Z-]*\.)+[a-zA-Z]{2,4}$/.exec(b)){e.text("邮箱格式有误，请检查").show().css("display","block");return}return 1}function submit_form(){var a=1;a&=check_mail();if(a){return true}return false}function hide_err(b){var a=0,c;b=b.split(" ");for(;a<b.length;++a){$("#"+b[a]).focus(function(){if(this.value==""){$("#err_"+this.id).hide()}}).change(function(){$("#err_"+this.id).hide()})}}function nofix(){$("#password").focus()}$(function(){$("#submit").focus(check_mail);hide_err("mail");$("#mail").focus()});